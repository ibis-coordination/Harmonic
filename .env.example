RAILS_ENV=development
HOST_MODE=caddy # caddy, ngrok, or direct
# Caddy admin API for auto-regenerating Caddyfile when tenants change (docker network address)
CADDY_ADMIN_URL=http://caddy:2019
AUTH_MODE=oauth # or honor_system for development
# Single-tenant mode: disables subdomain routing, uses PRIMARY_SUBDOMAIN for all requests
# For local single-tenant: SINGLE_TENANT_MODE=true, HOSTNAME=localhost:3000, AUTH_MODE=honor_system
# SINGLE_TENANT_MODE=true
NGROK_AUTHTOKEN=
HOSTNAME=harmonic.localhost
# scripts/setup.sh will create a tenant record for this subdomain if it doesn't already exist
# If using ngrok, set the subdomain to the ngrok subdomain (currently only works with static subdomains)
PRIMARY_SUBDOMAIN=www
# Auth subdomain should be different from the primary subdomain.
# The auth subdomain + hostname is what you register with OAuth providers like GitHub.
# This allows a single OAuth app to be used across multiple subdomains/tenants.
AUTH_SUBDOMAIN=auth
# Comma separated list of other subdomains to list on the homepage
OTHER_PUBLIC_SUBDOMAINS=
#
# Redis configuration
# Development: password not required (use redis://redis:6379/0)
# Production: set REDIS_PASSWORD and use redis://:password@redis:6379/0
REDIS_PASSWORD=
REDIS_URL=redis://redis:6379/0
# For production with password: REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
POSTGRES_USER=harmonic
POSTGRES_PASSWORD=harmonic
POSTGRES_DB=harmonic_development
# execute ./scripts/generate-secret-key-base.sh to get a unique secret
SECRET_KEY_BASE=
RAILS_SERVE_STATIC_FILES=true
# OAuth
ENABLED_OAUTH_PROVIDERS=github
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
# If using DigitalOcean Spaces for ActiveStorage
DO_SPACES_ACCESS_KEY_ID=
DO_SPACES_SECRET_ACCESS_KEY=
DO_SPACES_REGION=
DO_SPACES_BUCKET=
DO_SPACES_ENDPOINT=
# Email configuration (optional - emails will be logged if not configured)
# For AWS SES, use these settings:
#   SMTP_SERVER=email-smtp.<region>.amazonaws.com (e.g., email-smtp.us-east-1.amazonaws.com)
#   SMTP_PORT=587
#   SMTP_USERNAME=<Your SES SMTP username from IAM>
#   SMTP_PASSWORD=<Your SES SMTP password from IAM>
#   SMTP_DOMAIN=<Your verified domain>
#   MAILER_FROM_ADDRESS=noreply@<your-verified-domain>
#
# AWS SES Setup Steps:
# 1. Verify your sending domain in SES console
# 2. Add SPF/DKIM records (SES provides these)
# 3. Request production access (initially in sandbox mode)
# 4. Create SMTP credentials in SES console (generates IAM user)
#
SMTP_SERVER=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_DOMAIN=
MAILER_FROM_ADDRESS=
# LLM Chat (requires `docker compose --profile llm up`)
# Trio is the primary LLM service - it handles voting ensemble and passes through to LiteLLM
TRIO_BASE_URL=http://trio:8000
# Trio settings (model names must match entries in config/litellm_config.yaml)
TRIO_MODELS=default,default,default
TRIO_BACKEND_URL=http://litellm:4000
TRIO_TIMEOUT=120
# System prompts for each model (pipe-delimited, one per model)
# Default prompts encourage variety: concise | thorough | balanced
# TRIO_SYSTEM_PROMPTS=Be concise|Be detailed|Be balanced
# Aggregation method: acceptance_voting, random, judge, synthesize, or concat
#   acceptance_voting: (default) Models vote on all responses, best wins
#   random: Randomly select one model's response
#   judge: Separate judge model picks the best response
#   synthesize: Separate model combines all responses into one
#   concat: Concatenate all responses
TRIO_AGGREGATION_METHOD=acceptance_voting
# Model for judge aggregation (required if TRIO_AGGREGATION_METHOD=judge)
# TRIO_JUDGE_MODEL=
# Model for synthesize aggregation (required if TRIO_AGGREGATION_METHOD=synthesize)
# TRIO_SYNTHESIZE_MODEL=
# LiteLLM API keys (used by Trio's backend for external models like Claude/GPT)
# ANTHROPIC_API_KEY=
# OPENAI_API_KEY=
#
# Monitoring and Alerting
# Sentry error tracking (https://sentry.io)
# Get DSN from your Sentry project settings
SENTRY_DSN=
# Optional: adjust sampling rates (0.0-1.0, default 0.1 = 10%)
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1
#
# Slack webhook for alerts (optional)
# Create incoming webhook at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=
#
# Email recipients for critical alerts (comma-separated)
ALERT_EMAIL_RECIPIENTS=
#
# Metrics endpoint authentication token
# Required to access /metrics endpoint
METRICS_AUTH_TOKEN=
#
# Session Security
# Absolute timeout: maximum session duration from login (in seconds)
# Default: 86400 (24 hours)
# SESSION_ABSOLUTE_TIMEOUT=86400
#
# Idle timeout: session expires after this much inactivity (in seconds)
# Default: 7200 (2 hours)
# SESSION_IDLE_TIMEOUT=7200
