# Users

[Back to Admin Dashboard](/admin)

All users in `<%= @current_tenant.subdomain %>.<%= ENV['HOSTNAME'] %>` (<%= @total_users %> total)

<% if @search_query.present? -%>
**Search:** `<%= @search_query %>` ([Clear search](/admin/users))

<% end -%>
<% if @total_pages > 1 -%>
**Page <%= @page %> of <%= @total_pages %>**
<% base_url = @search_query.present? ? "/admin/users?q=#{CGI.escape(@search_query)}&" : "/admin/users?" -%>
<% if @page > 1 -%>[Previous](<%= base_url %>page=<%= @page - 1 %>)<% end -%>
<% if @page > 1 && @page < @total_pages %> | <% end -%>
<% if @page < @total_pages -%>[Next](<%= base_url %>page=<%= @page + 1 %>)<% end %>

<% end -%>
<% user_type_labels = { 'human' => 'People', 'ai_agent' => 'AI Agents' } -%>
<% ['person', 'ai_agent'].each do |user_type| -%>
<% users = @users_by_type[user_type] || [] -%>
<% total_count = @counts_by_type[user_type] || 0 -%>
## <%= user_type_labels[user_type] || user_type.titleize %> (<%= total_count %> total)

<% if users.any? -%>
<% if user_type == 'ai_agent' -%>
| Handle | Name | Status |
|--------|------|--------|
<% users.each do |user| -%>
<% tenant_user = user.tenant_users.find { |tu| tu.tenant_id == @current_tenant.id } -%>
<% handle = tenant_user&.handle || 'unknown' -%>
<% status_badges = [] -%>
<% status_badges << 'admin' if @current_tenant.is_admin?(user) -%>
<% status_badges << 'SUSPENDED' if user.suspended? -%>
| [`<%= handle %>`](/admin/users/<%= handle %>) | <%= raw user.display_name || user.name %> | <%= status_badges.join(', ') %> |
<% end -%>
<% else -%>
| Handle | Name | Email | Status |
|--------|------|-------|--------|
<% users.each do |user| -%>
<% tenant_user = user.tenant_users.find { |tu| tu.tenant_id == @current_tenant.id } -%>
<% handle = tenant_user&.handle || 'unknown' -%>
<% status_badges = [] -%>
<% status_badges << 'admin' if @current_tenant.is_admin?(user) -%>
<% status_badges << 'SUSPENDED' if user.suspended? -%>
| [`<%= handle %>`](/admin/users/<%= handle %>) | <%= raw user.display_name || user.name %> | <%= user.email %> | <%= status_badges.join(', ') %> |
<% end -%>
<% end -%>
<% else -%>
No <%= user_type_labels[user_type]&.downcase || user_type.pluralize %> found.

<% end -%>
<% end -%>
<% if @total_pages > 1 -%>
---

**Page <%= @page %> of <%= @total_pages %>**
<% base_url = @search_query.present? ? "/admin/users?q=#{CGI.escape(@search_query)}&" : "/admin/users?" -%>
<% if @page > 1 -%>[Previous](<%= base_url %>page=<%= @page - 1 %>)<% end -%>
<% if @page > 1 && @page < @total_pages %> | <% end -%>
<% if @page < @total_pages -%>[Next](<%= base_url %>page=<%= @page + 1 %>)<% end %>

<% end -%>
## Actions

<% if can_perform_admin_actions? -%>
To suspend or unsuspend a user, view their profile and use the available actions.

To search by email, add `?q=<email>` to the URL.
<% else -%>
* No actions available (read-only access)
<% end -%>
