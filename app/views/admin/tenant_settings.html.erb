<h4 style="margin-bottom:0;">
  <%= octicon 'tools' %>
  <%= link_to 'Admin', '/admin' %>
</h4>
<h1 style="margin-top:0;">Tenant Settings</h1>
<%= form_with(url: "/admin/settings") do |form| %>
  <h2>Tenant Name</h2>
  <p>
    <%= form.text_field :name, placeholder: 'Tenant Name', value: @current_tenant.name %>
  </p>

  <h2>Default Time Zone</h2>
  <p>
    <%= form.time_zone_select :timezone, ActiveSupport::TimeZone.all, default: @current_tenant.timezone.name %>
  </p>

  <h2>Require Login</h2>
  <p>
    <%= form.check_box :require_login, checked: @current_tenant.require_login? %>
    Require login for all users
  </p>

  <% available_flags = FeatureFlagService.all_flags.select { |f| FeatureFlagService.app_enabled?(f) } %>
  <% if available_flags.any? %>
    <h2>Features Enabled</h2>
    <p style="color: var(--color-fg-muted); margin-bottom: 1rem;">
      Features must be enabled here for studios to use them. When disabled, the feature is unavailable for all studios in this tenant.
    </p>

    <% available_flags.each do |flag_name| %>
      <% metadata = FeatureFlagService.flag_metadata(flag_name) %>
      <% tenant_enabled_locally = @current_tenant.feature_flag_enabled_locally?(flag_name) %>

      <div style="margin-bottom: 1rem; padding: 0.75rem; border: 1px solid var(--color-border-default);">
        <strong><%= metadata['name'] %></strong>
        <p style="margin: 0.5rem 0;">
          <%= form.check_box "feature_#{flag_name}", checked: tenant_enabled_locally, id: "feature_#{flag_name}" %>
          <label for="feature_<%= flag_name %>"><%= metadata['description'] %></label>
        </p>
      </div>
    <% end %>
  <% end %>

  <!-- <h2>Home Page</h2>
  <h2>About Page</h2>
  <h2>Help Page</h2>
  <h2>Contact Page</h2> -->

  <hr style="height:1px;" />
  <%= form.submit 'Save' %>
<% end %>
