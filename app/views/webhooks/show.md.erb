# Webhook: <%= @webhook.name %>

## Details

| Field | Value |
|-------|-------|
| URL | `<%= @webhook.url %>` |
| Status | <%= @webhook.enabled? ? "Enabled" : "Disabled" %> |
| Events | <%= @webhook.events.include?("*") ? "All events" : @webhook.events.join(", ") %> |
| Secret | `<%= @webhook.secret.first(8) %>...` (partial) |
| Created | <%= @webhook.created_at.strftime("%Y-%m-%d %H:%M") %> |

## Recent Deliveries

<% if @recent_deliveries.empty? %>
No deliveries yet.
<% else %>
| Event | Status | Response | Attempts | Time |
|-------|--------|----------|----------|------|
<% @recent_deliveries.each do |delivery| %>
| `<%= delivery.event&.event_type || "unknown" %>` | <%= delivery.status %> | <%= delivery.response_code || (delivery.error_message ? truncate(delivery.error_message, length: 30) : "-") %> | <%= delivery.attempt_count %> | <%= time_ago_in_words(delivery.created_at) %> ago |
<% end %>
<% end %>

## [Actions](/studios/<%= @current_studio.handle %>/settings/webhooks/<%= @webhook.truncated_id %>/actions)

* [`update_webhook(name, url, events, enabled)`](/studios/<%= @current_studio.handle %>/settings/webhooks/<%= @webhook.truncated_id %>/actions/update_webhook) - Update this webhook
* [`delete_webhook()`](/studios/<%= @current_studio.handle %>/settings/webhooks/<%= @webhook.truncated_id %>/actions/delete_webhook) - Delete this webhook
* [`test_webhook()`](/studios/<%= @current_studio.handle %>/settings/webhooks/<%= @webhook.truncated_id %>/actions/test_webhook) - Send a test webhook

## Navigation

* [All Webhooks](/studios/<%= @current_studio.handle %>/settings/webhooks)
* [Studio Settings](/studios/<%= @current_studio.handle %>/settings)
