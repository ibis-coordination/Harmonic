<%= render 'shared/pulse_breadcrumb', items: [
  [@current_superagent.name, @current_superagent.path],
  ['Note', @note.path],
  'Edit'
] %>

<article class="pulse-resource-detail">
  <header class="pulse-resource-header">
    <div class="pulse-resource-header-top">
      <span class="pulse-resource-type-label">
        <i class="note-icon icon-sm"></i>
        Note
      </span>
      <code class="pulse-resource-id"><%= @note.truncated_id %></code>
    </div>
    <h1 class="pulse-resource-title">Edit Note</h1>
  </header>

  <%= form_with(url: @note.path, method: :patch, class: "pulse-form") do |form| %>
    <div class="pulse-form-group">
      <label class="pulse-form-label">Content</label>
      <div class="mention-autocomplete-container" data-controller="mention-autocomplete" data-mention-autocomplete-studio-path-value="<%= @current_superagent.path %>">
        <%= form.text_area :text,
            placeholder: "Write your note here... (use @ to mention users)",
            value: @note.text,
            class: "pulse-form-textarea",
            rows: 12,
            data: { mention_autocomplete_target: "input" } %>
        <div data-mention-autocomplete-target="dropdown" class="mention-dropdown"></div>
      </div>
      <p class="pulse-form-hint">Update events will appear in note history.</p>
    </div>

    <div class="pulse-form-actions">
      <%= form.submit 'Save Note', class: 'pulse-action-btn' %>
      <%= link_to 'Cancel', @note.path, class: 'pulse-action-btn-secondary' %>
    </div>
  <% end %>
</article>
