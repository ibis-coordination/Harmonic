<%# Homepage mockup - shows user's scenes, studios, and other subdomains %>

<article class="pulse-home">
  <header class="pulse-page-header">
    <h1 class="pulse-page-title"><span><%= @dummy_current_tenant.subdomain %><span class="pulse-subdomain-suffix">.<%= @dummy_hostname %></span></span></h1>
  </header>

  <%# Scenes Section - with items %>
  <%= render 'shared/pulse_accordion', title: 'Your Scenes', icon: 'eye', tooltip: 'Scenes are publicly visible groups.', count: @dummy_scenes.count, open: true do %>
    <% if @dummy_scenes.any? %>
      <div class="pulse-home-section-intro">
        <a href="/scenes/new" class="pulse-action-btn-secondary">
          <%= octicon 'plus', height: 14 %>
          New Scene
        </a>
      </div>

      <ul class="pulse-home-list" style="list-style-type: none;">
        <% @dummy_scenes.each do |scene| %>
          <li class="pulse-home-list-item" style="list-style-type: none;">
            <a href="<%= scene.path %>" class="pulse-home-list-link">
              <span class="pulse-home-list-icon pulse-default-icon">
                <%= octicon 'people', height: 14 %>
              </span>
              <span class="pulse-home-list-name"><%= scene.name %></span>
            </a>
          </li>
        <% end %>
        <li class="pulse-home-list-item pulse-home-list-item-explore" style="list-style-type: none;">
          <a href="/scenes" class="pulse-home-list-link pulse-home-list-link-muted">
            <%= octicon 'telescope', height: 16 %>
            <span>Explore other scenes on <code><%= @dummy_current_tenant.subdomain %></code></span>
          </a>
        </li>
      </ul>
    <% else %>
      <div class="pulse-empty-state-action">
        <p>You haven't joined any scenes yet.</p>
        <p><a href="/scenes" class="pulse-link"><%= octicon 'telescope', height: 14 %> Explore scenes on <code><%= @dummy_current_tenant.subdomain %></code></a></p>
        <a href="/scenes/new" class="pulse-action-btn-secondary">
          <%= octicon 'plus', height: 14 %>
          New Scene
        </a>
      </div>
    <% end %>
  <% end %>

  <%# Studios Section - with items %>
  <%= render 'shared/pulse_accordion', title: 'Your Studios', icon: 'lock', tooltip: 'Studios are private groups.', count: @dummy_studios.count, open: true do %>
    <% if @dummy_studios.any? %>
      <div class="pulse-home-section-intro">
        <a href="/studios/new" class="pulse-action-btn-secondary">
          <%= octicon 'plus', height: 14 %>
          New Studio
        </a>
      </div>

      <ul class="pulse-home-list" style="list-style-type: none;">
        <% @dummy_studios.each do |studio| %>
          <li class="pulse-home-list-item" style="list-style-type: none;">
            <a href="<%= studio.path %>" class="pulse-home-list-link">
              <% if studio.has_heartbeat %>
                <span class="pulse-heartbeat-icon pulse-heartbeat-sent" title="Checked in this cycle">
                  <%= octicon 'heart-fill', height: 16 %>
                </span>
              <% else %>
                <span class="pulse-heartbeat-icon pulse-heartbeat-pending" title="Not yet checked in this cycle">
                  <%= octicon 'heart', height: 16 %>
                </span>
              <% end %>
              <span class="pulse-home-list-icon pulse-default-icon">
                <%= octicon 'people', height: 14 %>
              </span>
              <span class="pulse-home-list-name"><%= studio.name %></span>
            </a>
          </li>
        <% end %>
      </ul>
    <% else %>
      <div class="pulse-empty-state-action">
        <p>You're not a member of any studios yet.</p>
        <a href="/studios/new" class="pulse-action-btn-secondary">
          <%= octicon 'plus', height: 14 %>
          New Studio
        </a>
      </div>
    <% end %>
  <% end %>

  <%# Subdomains Section %>
  <%= render 'shared/pulse_accordion', title: 'Your Subdomains', icon: 'globe', tooltip: 'Each subdomain contains a separate set of scenes and studios.', count: @dummy_tenants.count + 1, open: true do %>
    <%# Showing enabled state (admin on primary tenant) for mockup %>
    <div class="pulse-home-section-intro">
      <a href="/admin/tenants/new" class="pulse-action-btn-secondary">
        <%= octicon 'plus', height: 14 %>
        New Subdomain
      </a>
    </div>

    <ul class="pulse-home-list" style="list-style-type: none;">
      <li class="pulse-home-list-item pulse-home-list-item-current" style="list-style-type: none;">
        <span class="pulse-home-list-link">
          <code class="pulse-subdomain-code"><%= @dummy_current_tenant.subdomain %></code>
          <span class="pulse-current-badge">current</span>
        </span>
      </li>
      <% @dummy_tenants.each do |tenant| %>
        <li class="pulse-home-list-item" style="list-style-type: none;">
          <a href="https://<%= tenant.subdomain %>.<%= @dummy_hostname %>" class="pulse-home-list-link">
            <code class="pulse-subdomain-code"><%= tenant.subdomain %></code>
          </a>
        </li>
      <% end %>
    </ul>
  <% end %>
</article>
