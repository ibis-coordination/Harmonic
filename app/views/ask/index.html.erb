<h1>Ask Harmonic</h1>

<p>Multiple AI models generate responses, then vote using acceptance voting to select the best answer.</p>

<div data-controller="ask-chat" class="ask-chat-container">
  <%# Input form - works without JS as fallback %>
  <%= form_with url: ask_path, method: :post, local: true, data: { action: "submit->ask-chat#submit", "ask-chat-target": "form" } do |form| %>
    <div class="ask-chat-input-container">
      <%= form.text_area :question,
          placeholder: "Ask a question about Harmonic...",
          rows: 2,
          class: "ask-chat-input",
          data: { "ask-chat-target": "input", action: "keydown->ask-chat#keydown" },
          autofocus: true %>
      <%= form.submit "Ask",
          class: "ask-chat-submit",
          data: { "ask-chat-target": "submitButton" } %>
    </div>
  <% end %>

  <%# Loading indicator %>
  <div data-ask-chat-target="loading" class="ask-chat-loading" style="display: none;">
    <div class="ask-chat-spinner"></div>
    <span>Generating responses and voting...</span>
  </div>

  <%# Result area - shows one Q&A pair %>
  <div data-ask-chat-target="result" class="ask-chat-result"></div>
</div>
