# Edit: <%= @automation_rule.name %>

Edit the YAML configuration for this automation.

## Current Configuration

```yaml
<%= raw @automation_rule.yaml_source %>
```

## YAML Reference

### Webhook IP Restrictions

For webhook triggers, you can optionally restrict by IP:

```yaml
trigger:
  type: webhook
  allowed_ips:         # Optional
    - "10.0.0.1"       # Exact IP address
    - "192.168.1.0/24" # CIDR range
    - "2001:db8::/32"  # IPv6 supported
```

### Manual Trigger Configuration

For manual triggers, you can define typed inputs:

```yaml
trigger:
  type: manual
  inputs:
    report_date:
      label: "Report Date"
      type: string        # string, number, or boolean
      default: "today"
```

### Template Variables (Event Triggers)
- `{{event.type}}` - The event type
- `{{event.actor.name}}` - Name of the triggering user
- `{{subject.path}}` - URL path to the subject
- `{{subject.title}}` - Title of the subject
- `{{studio.handle}}` - Handle of the studio

### Template Variables (Webhook Triggers)
- `{{payload.*}}` - Access webhook JSON payload (e.g., `{{payload.event}}`, `{{payload.data.value}}`)
- `{{webhook.path}}` - The webhook path that was called
- `{{webhook.source_ip}}` - IP address of the webhook sender
- `{{webhook.received_at}}` - Timestamp when webhook was received

### Template Variables (Manual Triggers)
- `{{inputs.*}}` - Access input values (e.g., `{{inputs.report_date}}`)
- `{{triggered_at}}` - Timestamp when run was triggered
- `{{triggered_by}}` - ID of the user who triggered the run

### Condition Operators
- `==`, `!=` - Equal, not equal
- `>`, `>=`, `<`, `<=` - Numeric comparisons
- `contains`, `not_contains` - String contains
- `matches`, `not_matches` - Regex matching

## Navigation

* [Back to Automation](<%= automation_path(@automation_rule) %>)
* [Back to Automations](<%= automations_index_path %>)
