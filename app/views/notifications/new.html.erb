<%
  # Default to tenant timezone, or UTC if not set
  default_timezone = @current_tenant&.timezone&.name || "UTC"
%>

<%= render 'shared/show_resource_breadcrumbs', resource: nil, hide_studio_path: true do %>
  <%= octicon "clock" %> New Reminder
<% end %>

<p style="color:var(--color-fg-muted);">Schedule a reminder to be delivered to your notifications inbox at a specific time.</p>

<%= form_tag "/notifications/actions/create_reminder", method: :post do %>
  <h3>Title</h3>
  <p>
    <input type="text" name="title" id="title" placeholder="e.g., Review pull request" required maxlength="255">
  </p>

  <h3>When</h3>
  <p style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
    <input type="datetime-local" name="scheduled_for" id="scheduled_for" required style="flex:1; min-width:200px;">
    <%= time_zone_select nil, :timezone, nil, { default: default_timezone }, { style: "flex:0 0 auto;" } %>
  </p>
  <p style="color:var(--color-fg-muted); font-size:0.9em; margin-top:-8px;">
    Or use relative time like "1h" (1 hour), "2d" (2 days), "1w" (1 week)
  </p>

  <h3>Details <span style="font-weight:normal; color:var(--color-fg-muted);">(optional)</span></h3>
  <p>
    <textarea name="body" id="body" rows="3" placeholder="Additional notes..." maxlength="200"></textarea>
  </p>

  <h3>Link <span style="font-weight:normal; color:var(--color-fg-muted);">(optional)</span></h3>
  <p>
    <input type="url" name="url" id="url" placeholder="https://...">
  </p>
  <p style="color:var(--color-fg-muted); font-size:0.9em; margin-top:-8px;">
    A URL to include with the reminder
  </p>

  <hr style="height:1px;">
  <button type="submit"><%= octicon "clock" %> Schedule Reminder</button>
<% end %>

<p><a href="/notifications">&larr; Back to Notifications</a></p>
