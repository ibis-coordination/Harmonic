# Notifications

Unread: <%= @unread_count %>

<% if @scheduled_reminders.any? -%>
## Scheduled Reminders

| Scheduled For | Title | Body | Actions |
|---------------|-------|------|---------|
<% @scheduled_reminders.each do |nr| -%>
| <%= nr.scheduled_for.strftime("%Y-%m-%d %H:%M") %> | <%= nr.notification.title %> | <%= nr.notification.body || "-" %> | [delete](/notifications/actions/delete_reminder?id=<%= nr.id %>) |
<% end -%>

<% end -%>
<% if @notification_recipients.empty? -%>
No notifications.
<% else -%>
## Recent Notifications

<% @notifications_by_superagent.each do |superagent, recipients| -%>
<% studio_id = superagent&.id || 'reminders' -%>
<% studio_name = superagent&.name || 'Other' -%>
### <%= studio_name %> (<%= recipients.size %>) - [dismiss_for_studio](/notifications/actions/dismiss_for_studio?studio_id=<%= studio_id %>)

| Title | Time | Actions |
|-------|------|---------|
<% recipients.each do |recipient| -%>
| [<%= recipient.notification.title %>](<%= recipient.notification.url || '/notifications' %>) | <%= time_ago_in_words(recipient.created_at) %> ago | [dismiss](/notifications/actions/dismiss?id=<%= recipient.id %>) |
<% end -%>

<% end -%>
<% end -%>

## [Actions](/notifications/actions)

* [`dismiss(id)`](/notifications/actions/dismiss) - Dismiss a notification
* [`dismiss_all()`](/notifications/actions/dismiss_all) - Dismiss all notifications
* [`dismiss_for_studio(studio_id)`](/notifications/actions/dismiss_for_studio) - Dismiss all notifications for a specific studio
* [`create_reminder(title, scheduled_for, body, url)`](/notifications/actions/create_reminder) - Schedule a reminder for your future self
* [`delete_reminder(id)`](/notifications/actions/delete_reminder) - Cancel a scheduled reminder
